!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{KqxN:function(t,a,r){"use strict";r.r(a),r.d(a,"SuggestionsModule",(function(){return Z}));var o,n=r("RTZT"),c=r("fXoL"),l=r("ORUg"),s=r("8xha"),u=r("NFeN"),d=((o=function(){function t(i,a){e(this,t),this._apiDataService=i,this.entity=a,this.imageUrl=n.a.File.download}return i(t,[{key:"refresh",value:function(e){throw new Error("Method not implemented.")}},{key:"afterGuiAttached",value:function(e){throw new Error("Method not implemented.")}},{key:"getValue",value:function(){return this.params.value}},{key:"isPopup",value:function(){return!1}},{key:"agInit",value:function(e){this.params=e,this.gridApi=e.api}},{key:"onClick",value:function(e){var t=this,i=(e=this.params.node).data;console.log(i),confirm("Are you sure you want to delete this?")&&e&&this._apiDataService.delete(n.a.Report.delete.replace("{entityId}",e.data._id),i).subscribe((function(e){1==e.ok&&(t.gridApi.applyTransaction({remove:[i]}),t.entity.showSuccessToast("deleted")),console.log(e)}))}}]),t}()).\u0275fac=function(e){return new(e||o)(c.Rb(l.a),c.Rb(s.a))},o.\u0275cmp=c.Lb({type:o,selectors:[["app-delete-renderer"]],decls:2,vars:0,consts:[["aria-hidden","false",1,"example-icon",3,"click"]],template:function(e,t){1&e&&(c.Xb(0,"mat-icon",0),c.fc("click",(function(e){return t.onClick(e)})),c.Qc(1,"delete"),c.Wb())},directives:[u.a],styles:[""]}),o),p=r("ofXK"),m=r("tyNb"),h=r("M9IT"),f=r("Dh3D"),b=r("PVWW"),g=r("YJnW"),v=r("pTsn"),x=r("wd/R"),w=r("XNiG"),y=r("3Pt+"),k=r("0IaG"),C=r("ChV4"),F=r("kmnG"),D=r("qFsG"),S=r("iadO"),R=r("XiUz"),W=r("bTqV"),X=r("sYmb");function A(e,t){1&e&&(c.Xb(0,"div",22),c.Sb(1,"img",23),c.Wb()),2&e&&(c.Fb(1),c.qc("src","assets/images/ecommerce/product-image-placeholder.png",c.Gc))}function q(e,t){if(1&e){var i=c.Yb();c.Xb(0,"div",22),c.Sb(1,"img",23),c.Xb(2,"button",24),c.fc("click",(function(){c.Ec(i);var e=c.jc().index;return c.jc().deleteFilelocationImages(e)})),c.Xb(3,"mat-icon"),c.Qc(4),c.kc(5,"translate"),c.Wb(),c.Wb(),c.Wb()}if(2&e){var a=c.jc().$implicit,r=c.jc();c.Fb(1),c.qc("src",r.ImageSrc+a,c.Gc),c.Fb(3),c.Rc(c.lc(5,2,"delete"))}}function I(e,t){if(1&e&&(c.Xb(0,"div"),c.Oc(1,q,6,4,"div",19),c.Wb()),2&e){var i=c.jc();c.Fb(1),c.qc("ngIf",(null==i.vals?null:i.vals.length)>0)}}var _,G,L,P,U=((_=function(){function t(i,a,r,o,c,l){var s;e(this,t),this.dialogRef=i,this.data=a,this._formBuilder=r,this._apiDataservice=o,this.override=c,this.entity=l,this.vals=[],console.log(a),this.id=a.userData.data.offerId,this.dataFromUser=null===(s=null==a?void 0:a.userData)||void 0===s?void 0:s.data,console.log(this.dataFromUser),this.ImageSrc=n.a.File.download}return i(t,[{key:"ngOnInit",value:function(){this.form=this._formBuilder.group({description:this._formBuilder.group({en:this._formBuilder.control(null,y.H.required),ar:this._formBuilder.control(null,y.H.required)}),images:this._formBuilder.control(null,y.H.required),expire:this._formBuilder.control(null,y.H.required),priceBefore:this._formBuilder.control(null,y.H.required),priceAfter:this._formBuilder.control(null,y.H.required)}),this.getdata()}},{key:"getdata",value:function(){var e,t,i,a,r,o;this.vals=null===(e=this.dataFromUser)||void 0===e?void 0:e.images,this.form.patchValue({description:null===(t=this.dataFromUser)||void 0===t?void 0:t.description,images:null===(i=this.dataFromUser)||void 0===i?void 0:i.images,expire:null===(a=this.dataFromUser)||void 0===a?void 0:a.expire,priceBefore:null===(r=this.dataFromUser)||void 0===r?void 0:r.priceBefore,priceAfter:null===(o=this.dataFromUser)||void 0===o?void 0:o.priceAfter})}},{key:"uploadFilelocationImages",value:function(e){for(var t=this,i=e.target.files,a=new FormData,r=0;r<i.length;r++)a.append("files",i[r]);this.uploadSubscription=this.entity.save(n.a.File.UploadMultiple,a,this.override.FilesAuthHeaders).subscribe((function(e){var i;e?t.entity.showSuccessToast("Uploaded"):t.entity.showErrorToast("sorry try again"),null===(i=e.body)||void 0===i||i.forEach((function(e){t.vals.push(e.id)})),t.form.get("images").setValue(t.vals)}))}},{key:"deleteFilelocationImages",value:function(e){this.vals=this.form.get("images").value,this.vals.splice(e,1)}},{key:"onSubmit",value:function(){this._apiDataservice.update(n.a.Utility.put.replace("{entityId}",this.dataFromUser),this.form.value).subscribe((function(e){console.log(e)})),this.dialogRef.close()}}]),t}()).\u0275fac=function(e){return new(e||_)(c.Rb(k.h),c.Rb(k.a),c.Rb(y.g),c.Rb(l.a),c.Rb(C.a),c.Rb(s.a))},_.\u0275cmp=c.Lb({type:_,selectors:[["app-view-data"]],decls:41,vars:14,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["novalidate","",3,"formGroup","ngSubmit"],["formGroupName","description"],["appearance","outline"],["matInput","","formControlName","en","required",""],["matInput","","formControlName","ar","required",""],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","priceBefore","type","number"],["matInput","","formControlName","priceAfter","type","number"],["appearance","fill"],["matInput","","formControlName","expire",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["fxLayout","row wrap","fxLayoutAlign","start start"],[1,"uploadImg"],["mat-raised-button","","type","button",1,"d-block",3,"click"],["type","file","hidden","","id","LocationImgs","multiple","true",3,"change"],["LocationImgs",""],["class","product-image","fxlayout","row","fxLayoutAlign","center center",4,"ngIf"],[4,"ngFor","ngForOf"],["type","submit","mat-button",""],["fxlayout","row","fxLayoutAlign","center center",1,"product-image"],[1,"media",3,"src"],["mat-icon-button","",3,"click"]],template:function(e,t){if(1&e){var i=c.Yb();c.Xb(0,"h1",0),c.Qc(1,"Offer Data"),c.Wb(),c.Xb(2,"div",1),c.Xb(3,"form",2),c.fc("ngSubmit",(function(){return t.onSubmit()})),c.Vb(4,3),c.Xb(5,"mat-form-field",4),c.Xb(6,"mat-label"),c.Qc(7),c.kc(8,"translate"),c.Wb(),c.Sb(9,"input",5),c.Wb(),c.Xb(10,"mat-form-field",4),c.Xb(11,"mat-label"),c.Qc(12),c.kc(13,"translate"),c.Wb(),c.Sb(14,"input",6),c.Wb(),c.Ub(),c.Xb(15,"mat-form-field",7),c.Xb(16,"mat-label"),c.Qc(17,"Price Before"),c.Wb(),c.Sb(18,"input",8),c.Wb(),c.Xb(19,"mat-form-field",7),c.Xb(20,"mat-label"),c.Qc(21,"Price After"),c.Wb(),c.Sb(22,"input",9),c.Wb(),c.Xb(23,"mat-form-field",10),c.Xb(24,"mat-label"),c.Qc(25,"Expire Date"),c.Wb(),c.Sb(26,"input",11),c.Sb(27,"mat-datepicker-toggle",12),c.Sb(28,"mat-datepicker",null,13),c.Wb(),c.Xb(30,"div",14),c.Xb(31,"div",15),c.Xb(32,"button",16),c.fc("click",(function(){return c.Ec(i),c.Ac(36).click()})),c.Qc(33),c.kc(34,"translate"),c.Wb(),c.Wb(),c.Xb(35,"input",17,18),c.fc("change",(function(e){return t.uploadFilelocationImages(e)})),c.Wb(),c.Oc(37,A,2,1,"div",19),c.Oc(38,I,2,1,"div",20),c.Wb(),c.Xb(39,"button",21),c.Qc(40,"Save"),c.Wb(),c.Wb(),c.Wb()}if(2&e){var a=c.Ac(29);c.Fb(3),c.qc("formGroup",t.form),c.Fb(4),c.Rc(c.lc(8,8,"description in English")),c.Fb(5),c.Sc(" ",c.lc(13,10,"description in Arabic")," "),c.Fb(14),c.qc("matDatepicker",a),c.Fb(1),c.qc("for",a),c.Fb(6),c.Sc(" ",c.lc(34,12,"Upload")," "),c.Fb(4),c.qc("ngIf",0===(null==t.vals?null:t.vals.length)),c.Fb(1),c.qc("ngForOf",t.vals)}},directives:[k.i,k.f,y.J,y.u,y.l,y.m,F.c,F.g,D.b,y.d,y.t,y.j,y.E,y.z,S.h,S.j,F.j,S.f,R.f,R.e,W.b,p.t,p.s,u.a],pipes:[X.d],styles:["form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:400px;display:block;margin:0 auto}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:6px auto!important}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:#2196f3;color:#fff;width:100px;height:40px;max-width:150px;display:block;margin:0 auto}form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;display:block}"]}),_),O=r("YtCa"),M=r("A28N"),B=r("2ChS"),V=r("B9zo"),N=r("cWTo"),z=["filter"],H=["agGrid"],T=function(){return{delay:"50ms",scale:"0.2"}},E=function(e){return{value:"*",params:e}},Q=function(){return{delay:"100ms",x:"-25px"}},j=((G=function(){function t(i,a,r,o,n,c,l,s,u,p){var m=this;e(this,t),this._apiDataservice=i,this.translate=a,this.override=r,this.entities=o,this.entitie=n,this.dialog=c,this.router=l,this.excel=s,this._bottomSheet=u,this.activedRoute=p,this.displayedColumns=["expire","images","description","priceBefore","priceAfter"],this.frameworkComponents={deleteRenderer:d,imageRenderer:g.a,delete:d},this.defaultColDef={editable:!1,enableRowGroup:!0,enablePivot:!1,enableValue:!1,sortable:!0,resizable:!0,filter:!0,enableCellChangeFlash:!0,wrapText:!0,autoHeight:!0},this.columnDefs=[{headerName:"Expire Date",field:"expire",sortable:!0,filter:!0,onCellClicked:function(e){m.openUserData(e)},cellRenderer:function(e){return x.utc(e.value).format("LLL")},headerValueGetter:this.localizeHeader.bind(this)},{headerName:"Offer Image",field:"images",onCellClicked:function(e){m.openUserData(e)},cellRenderer:"imageRenderer",headerValueGetter:this.localizeHeader.bind(this)},{headerName:"Description",field:"description."+this.override.currentLang,sortable:!0,filter:!0,onCellClicked:function(e){m.openUserData(e)},headerValueGetter:this.localizeHeader.bind(this)},{headerName:"Price Before",field:"priceBefore",sortable:!0,filter:!0,onCellClicked:function(e){m.openUserData(e)},headerValueGetter:this.localizeHeader.bind(this)},{headerName:"Price After",field:"priceAfter",sortable:!0,filter:!0,onCellClicked:function(e){m.openUserData(e)},headerValueGetter:this.localizeHeader.bind(this)},{headerName:"Delete",cellRenderer:"delete",headerValueGetter:this.localizeHeader.bind(this)}],this.data=atob(sessionStorage.getItem(btoa("userid"))),this.getData(),this._unsubscribeAll=new w.a}return i(t,[{key:"getData",value:function(){var e=this;this.dataSubscription=this._apiDataservice.getData(n.a.Restaurant.getAllOffer+"?type=cafe").subscribe((function(t){console.log(t),e.rowData=t.body}))}},{key:"onGridReady",value:function(e){this.entitie.gridApi=e.api,this.gridColumnApi=e.columnApi,e.api.sizeColumnsToFit()}},{key:"localizeHeader",value:function(e){return this.translate.instant(e.colDef.headerName)}},{key:"ngOnInit",value:function(){}},{key:"rowDoubleClicked",value:function(e){}},{key:"rowSelected",value:function(e){console.log("selected")}},{key:"openBottomSheet",value:function(){this._bottomSheet.open(v.a)}},{key:"openUserData",value:function(e){var t=this;console.log(e),this.dialog.open(U,{data:{userData:e}}).afterClosed().subscribe((function(e){t.getData()}))}}]),t}()).\u0275fac=function(e){return new(e||G)(c.Rb(l.a),c.Rb(X.e),c.Rb(C.a),c.Rb(s.a),c.Rb(O.a),c.Rb(k.b),c.Rb(m.h),c.Rb(M.a),c.Rb(B.b),c.Rb(m.a))},G.\u0275cmp=c.Lb({type:G,selectors:[["app-suggestions"]],viewQuery:function(e,t){var i;1&e&&(c.Kc(h.a,!0),c.Kc(f.a,!0),c.Kc(z,!0),c.Vc(H,!0)),2&e&&(c.zc(i=c.gc())&&(t.paginator=i.first),c.zc(i=c.gc())&&(t.sort=i.first),c.zc(i=c.gc())&&(t.filter=i.first),c.zc(i=c.gc())&&(t.agGrid=i.first))},decls:20,vars:23,consts:[["id","products",1,"page-layout","carded","fullwidth","inner-scroll"],[1,"top-bg","accent"],[1,"center"],["fxLayout","column","fxLayoutAlign","center center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","space-between center",1,"header","accent"],["fxLayout","row","fxLayoutAlign","start center",1,"logo","mb-24","mb-md-0"],[1,"logo-icon","s-32","mr-16"],[1,"logo-text","h1"],[1,"search-wrapper","mx-32","mx-md-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search",2,"background","#FFF","color","#202020"],[3,"placeholder","ngModel","ngModelChange"],["filter",""],[1,"content-card"],["id","approveSubs",1,"ag-theme-material",2,"width","100%","height","500px",3,"rowData","columnDefs","defaultColDef","enableRtl","frameworkComponents","pagination","paginationPageSize","quickFilterText","rowSelected","rowDoubleClicked","gridReady"],["agGrid",""]],template:function(e,t){1&e&&(c.Xb(0,"div",0),c.Sb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"div",3),c.Xb(4,"div",4),c.Xb(5,"mat-icon",5),c.Qc(6," category "),c.Wb(),c.Xb(7,"span",6),c.Qc(8),c.kc(9,"translate"),c.Wb(),c.Wb(),c.Xb(10,"div",7),c.Xb(11,"div",8),c.Xb(12,"mat-icon"),c.Qc(13,"search"),c.Wb(),c.Xb(14,"input",9,10),c.fc("ngModelChange",(function(e){return t.searchValue=e})),c.kc(16,"translate"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(17,"div",11),c.Xb(18,"ag-grid-angular",12,13),c.fc("rowSelected",(function(e){return t.rowSelected(e)}))("rowDoubleClicked",(function(e){return t.rowDoubleClicked(e)}))("gridReady",(function(e){return t.onGridReady(e)})),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&e&&(c.Fb(5),c.qc("@animate",c.uc(18,E,c.tc(17,T))),c.Fb(2),c.qc("@animate",c.uc(21,E,c.tc(20,Q))),c.Fb(1),c.Sc(" ",c.lc(9,13,"All Complaints & suggestions")," "),c.Fb(6),c.rc("placeholder",c.lc(16,15,"Search for an Complaints Or suggestions")),c.qc("ngModel",t.searchValue),c.Fb(4),c.qc("rowData",t.rowData)("columnDefs",t.columnDefs)("defaultColDef",t.defaultColDef)("enableRtl",t.override.isRTL())("frameworkComponents",t.frameworkComponents)("pagination",!0)("paginationPageSize",7)("quickFilterText",t.searchValue))},directives:[V.a,R.f,R.e,u.a,R.b,y.d,y.t,y.w,N.a],pipes:[X.d],styles:["@media screen and (max-width:959px){e-commerce-products #products .top-bg{height:256px}}e-commerce-products #products>.center>.header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media screen and (max-width:599px){e-commerce-products #products>.center>.header .search-wrapper{width:100%}}e-commerce-products #products>.center>.header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}e-commerce-products #products>.center>.header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}@media screen and (max-width:959px){e-commerce-products #products>.center>.header{padding:8px 0;height:192px!important;min-height:233px!important;max-height:250px!important}}e-commerce-products .products-table{flex:1 1 auto;border-bottom:1px solid rgba(0,0,0,.12);overflow:auto;-webkit-overflow-scrolling:touch}e-commerce-products .products-table .mat-header-row{min-height:64px}e-commerce-products .products-table .product{position:relative;cursor:pointer;height:84px}e-commerce-products .products-table .mat-cell{min-width:0;display:flex;align-items:center}e-commerce-products .products-table .mat-column-id,e-commerce-products .products-table .mat-column-image{flex:0 1 84px}e-commerce-products .products-table .mat-column-image .product-image{width:52px;height:52px;border:1px solid rgba(0,0,0,.12)}e-commerce-products .products-table .mat-column-category{flex:0 1 240px}e-commerce-products .products-table .mat-column-price,e-commerce-products .products-table .mat-column-quantity{flex:0 1 160px}e-commerce-products .products-table .mat-column-active{flex:0 1 80px}e-commerce-products .products-table .quantity-indicator{display:inline-block;vertical-align:middle;width:8px;height:8px;border-radius:4px;margin-right:8px}e-commerce-products .products-table .quantity-indicator+span{display:inline-block;vertical-align:middle}e-commerce-products .products-table .active-icon{border-radius:50%}.search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}@media screen and (max-width:599px){.search-wrapper{width:100%}}.search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}.search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}@media (max-width:768px){.page-layout.carded.fullwidth>.center>.header{height:236px!important;min-height:236px!important;max-height:236px!important}.page-layout.carded>.top-bg{height:300px}}"],encapsulation:2,data:{animation:b.a}}),G),Y=r("5HBU"),J=((L=function(){function t(){e(this,t),this.imagePath=n.a.File.download}return i(t,[{key:"refresh",value:function(e){throw new Error("Method not implemented.")}},{key:"afterGuiAttached",value:function(e){throw new Error("Method not implemented.")}},{key:"getValue",value:function(){return this.params.value}},{key:"isPopup",value:function(){return!1}},{key:"agInit",value:function(e){this.params=e,this.gridApi=e.api}}]),t}()).\u0275fac=function(e){return new(e||L)},L.\u0275cmp=c.Lb({type:L,selectors:[["app-image-render"]],decls:1,vars:1,consts:[["alt","img",1,"img-fluid",2,"width","50px","height","50px",3,"src"]],template:function(e,t){1&e&&c.Sb(0,"img",0),2&e&&c.qc("src",t.imagePath+t.params.value,c.Gc)},styles:[""]}),L),K=[{path:"",component:j}],Z=((P=function t(){e(this,t)}).\u0275mod=c.Pb({type:P}),P.\u0275inj=c.Ob({factory:function(e){return new(e||P)},imports:[[p.c,m.l.forChild(K),N.c.withComponents([d,J]),Y.a]]}),P)},YJnW:function(t,a,r){"use strict";r.d(a,"a",(function(){return n}));var o=r("fXoL"),n=function(){var t=function(){function t(){e(this,t)}return i(t,[{key:"refresh",value:function(e){throw new Error("Method not implemented.")}},{key:"afterGuiAttached",value:function(e){throw new Error("Method not implemented.")}},{key:"getValue",value:function(){return this.params.value}},{key:"isPopup",value:function(){return!1}},{key:"agInit",value:function(e){this.params=e,this.gridApi=e.api}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Lb({type:t,selectors:[["app-image-render"]],decls:1,vars:1,consts:[["alt","img",1,"img-fluid",2,"width","50px","height","50px",3,"src"]],template:function(e,t){1&e&&o.Sb(0,"img",0),2&e&&o.qc("src",null==t.params?null:t.params.value,o.Gc)},styles:[""]}),t}()}}])}();